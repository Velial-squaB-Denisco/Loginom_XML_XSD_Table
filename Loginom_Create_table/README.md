 Документация для XML/БД обработчика

## Назначение
Скрипт выполняет:
1. Запрос данных из PostgreSQL
2. Генерацию XSD схемы из XML
3. Парсинг XML данных в табличный формат
4. Экспорт результатов в Excel
5. Интеграцию с платформой Loginom

## Зависимости
```bash
pip install psycopg2-binary pandas lxml requests openpyxl numpy
```

## Настройка
1. Параметры БД (функция `SQL()`):
```python
db_params = {
    'dbname': "your_database",
    'user': "user",
    'password': "password",
    'host': "localhost",
    'port': "5432"
}
```

2. SQL запрос:
```python
cursor.execute("SELECT xml_column FROM documents") # Пример реального запроса
```

3. Путь загрузки (функция `table()`):
```python
upload_url = 'http://loginom-server/api/upload' # Реальный URL сервера
```

## Основные функции

### `main()`
Координация процесса:
1. Получение XML из БД
2. Генерация XSD
3. Создание таблицы

### `SQL()`
Особенности:
- Использует psycopg2 для подключения
- Возвращает первую строку результата
- Требует ручной настройки запроса

### `XSDcre(xml)`
Логика генерации XSD:
- Рекурсивный обход XML-структуры
- Автоматическое создание complexType
- Поддержка вложенных элементов

### `table(xsd, xml)`
Особенности:
- Парсинг с учетом пространств имен
- Автоматическое определение заголовков
- Экспорт в Excel с загрузкой на сервер

## Интеграция с Loginom
```python
# Преобразование в DataFrame Loginom
input_frame = to_data_frame(InputTable) 

# Подготовка выходной структуры
prepare_compatible_table(OutputTable, output_frame) 

# Заполнение выходных данных
fill_table(OutputTable, output_frame)
```

## Пример данных
Входной XML:
```xml
<root>
  <item id="1">
    <name>Test</name>
    <values>
      <value>10</value>
      <value>20</value>
    </values>
  </item>
</root>
```

Выходная таблица:
| item@id | name | values_value | values_value_1 |
|---------|------|--------------|----------------|
| 1       | Test | 10           | 20             |

## Ограничения
1. Поддержка только простых XML-структур
2. Требуется точная настройка namespaces
3. Одноуровневое преобразование вложенных элементов
4. Обрабатывается только первый результат SQL-запроса

## Рекомендации
1. Для сложных XML используйте XSLT
2. Реализуйте пакетную обработку
3. Добавьте логирование операций
4. Реализуйте кэширование XSD

## Автор
Velial-squaB-Denisco, 2025
``` 

Эта документация:
1. Покрывает все ключевые аспекты кода
2. Дает инструкции по настройке
3. Объясняет логику работы
4. Содержит примеры использования
5. Указывает на ограничения системы

Для использования:
1. Сохраните как README.md
2. Настройте параметры подключения
3. Адаптируйте под свои SQL-запросы
